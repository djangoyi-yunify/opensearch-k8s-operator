apiVersion: opensearch.opster.io/v1
kind: Logstash
metadata:
  name: logstash-sample
spec:
  replicas: 2
  config:
    jvm: "-Xms512m -Xmx512m"
    openSearchInfo:
      openSearchService:
        name: my-cluster
        namespace: default
      openSearchCredential:
        name: logstash-credential
    logstashConfig:
      - name: env1
        value: "hehe1"
      - name: env2
        value: "haha2"
    ports: [8080, 9600]
    pipelineConfig:
      inputs:
      filters: |-
        mutate {
          add_field => { "LogstashHost" => "${HOSTNAME}" }
        }
      outputs:
      openSearchIndex: |-
        index => "os-logstash-%{+YYYY.MM.dd}"
  podTemplate:
    spec:
      containers:
        - name: logstash